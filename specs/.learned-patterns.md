# Learned Patterns

This file captures patterns discovered during implementation that should be followed consistently.

---

## [2026-01-30] PHP Component Pattern

**Context**: Creating shared header component to consolidate 16 duplicate navbars
**Pattern**: PHP include-based components should define config defaults, validate required params, and escape all dynamic values with `htmlspecialchars()`
**Reason**: Prevents XSS vulnerabilities and provides consistent behavior when config is incomplete

---

## [2026-01-30] CSS Isolation Pattern

**Context**: Shared component CSS that must not conflict with existing page styles
**Pattern**: Wrap all component styles with a unique class (e.g., `.header-component`) to prevent CSS specificity conflicts
**Reason**: Existing pages have inline styles that may conflict with component styles

---

## [2026-01-30] Mobile Menu JavaScript IDs

**Context**: Mobile hamburger menu toggle functionality
**Pattern**: Use `#navbar-toggle` for hamburger button and `#navbar-dropdown` for mobile menu container - these IDs are expected by the JS
**Reason**: Existing JavaScript in index.php uses these exact IDs; changing them would break functionality

---

## [2026-01-30] Pilot Migration Conservative Approach

**Context**: Migrating index.php (3356 lines) to use shared header component
**Pattern**: When migrating complex pages with extensive legacy CSS/JS, mark legacy code with cleanup comments rather than removing immediately. This allows testing before cleanup.
**Reason**: Legacy CSS with `.header-component` wrapper won't conflict (different specificity). Removing too much at once risks breaking page layout. Phase 7 cleanup is safer after all pages are migrated.

---

## [2026-01-30] Header Config Search Params

**Context**: Passing search parameters to header component
**Pattern**: Include `search_value` in config from `$_GET` to preserve user's search input when page reloads
**Reason**: Search form must retain user's search value after submission for good UX

---
